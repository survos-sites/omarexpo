{% extends "@SurvosMobile/onsPage.html.twig" %}
{% set onsMeta = ons_metadata(_self, 'tab') %}

{% block body %}

{% set globals = {a: 'b'} %}
{% set store = 'items' %}

    <twig:dexie
        refreshEvent="items.prechange"
        :store="store"
        :globals="globals"
        :filter="{}"
        :caller="_self">
        <twig:block name="twig_template" id="end_of_template">
            <ons-list>
                {% for row in rows %}
                {% set thumb = '/media/cache/small/%s/%s'|format(row.code, row.image) %}
                <ons-list-item class="list-item" tappable
                               {{ stimulus_action('app','open_page','click', {
                                   page: 'player',
                                   store: 'items',
                                   id: row.id
                               }) }}
                >
                    <div class="top list-item__top">
                        <div class="left list-item__left">
                            <img
                                    class="ons-mobile-thumbnail" src="{{ thumb }}"
                                 alt="{{ thumb }}"/>
                        </div>
                        <div class="center list-item__center">
                                <h3>
                                    {{ row.label }}
                                </h3>
                            <br/>
                        </div>
                        <div class="right list-item__right">
                            {{ row.year }}
                            <br />
                            ${{ row.price|number_format(0, ",", ".") }}
                        </div>
                    </div>
                </ons-list-item>
                {% endfor %}
            </ons-list>
            <!-- end_of_template -->
        </twig:block>

    </twig:dexie>

{% endblock %}
